<!--report.wxml - ä¸¥æ ¼æŒ‰ç…§å¯è§†åŒ–æœ€æ–°æ ·ç‰ˆ.htmlæ ¼å¼-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-text">åŠ è½½æŠ¥å‘Šä¸­...</view>
  </view>

  <!-- æŠ¥å‘Šå†…å®¹ -->
  <view wx:else class="dashboard">
    <!-- Header - æ¸å˜èƒŒæ™¯å¤´éƒ¨ -->
    <view class="header">
      <view class="header-title">{{reportData.personalInfo.name}}ä¸ªäººå¾ä¿¡åˆ†ææŠ¥å‘Š</view>
      <view class="report-info-header">
        <view>æŠ¥å‘Šæ—¶é—´: {{reportDate}}</view>
        <view>æŠ¥å‘Šç¼–å·: {{reportId}}</view>
      </view>
    </view>

    <!-- ä¸ªäººä¿¡æ¯æ¦‚è§ˆ -->
    <view class="personal-card">
      <view class="card-title">
        <text class="icon-user">ğŸ‘¤</text>
        ä¸ªäººä¿¡æ¯æ¦‚è§ˆ
      </view>
      <view class="info-grid">
        <view class="info-item">
          <view class="info-label">ç”¨æˆ·å§“å</view>
          <view class="info-value">{{reportData.personalInfo.name}}</view>
        </view>
        <view class="info-item">
          <view class="info-label">å¹´é¾„</view>
          <view class="info-value">{{reportData.personalInfo.age}}</view>
        </view>
        <view class="info-item">
          <view class="info-label">å©šå§»çŠ¶å†µ</view>
          <view class="info-value">{{reportData.personalInfo.maritalStatus}}</view>
        </view>
        <view class="info-item">
          <view class="info-label">å•ä½æ€§è´¨</view>
          <view class="info-value">{{reportData.personalInfo.companyType}}</view>
        </view>
        <view class="info-item">
          <view class="info-label">å·¥ä½œæ—¶é•¿</view>
          <view class="info-value">{{reportData.personalInfo.workYears}}</view>
        </view>
        <view class="info-item">
          <view class="info-label">å…¬ç§¯é‡‘åŸºæ•°</view>
          <view class="info-value">{{reportData.personalInfo.fundBase}}</view>
        </view>
        <view class="info-item">
          <view class="info-label">ç™½åå•å®¢ç¾¤</view>
          <view class="info-value">{{reportData.personalInfo.whiteList}}</view>
        </view>
        <view class="info-item">
          <view class="info-label">èº«ä»½è¯å·</view>
          <view class="info-value">{{reportData.personalInfo.idCard}}</view>
        </view>
      </view>
    </view>

    <!-- ç»Ÿè®¡æ•°æ®å¡ç‰‡ -->
    <view class="stats-grid">
      <view class="stat-card">
        <view class="stat-icon icon-credit">ğŸ’³</view>
        <view class="stat-label">æ€»æˆä¿¡</view>
        <view class="stat-value">{{reportData.statistics.totalCredit}}<text class="stat-unit">å…ƒ</text></view>
      </view>
      <view class="stat-card">
        <view class="stat-icon icon-debt">ğŸ’°</view>
        <view class="stat-label">æ€»è´Ÿå€º</view>
        <view class="stat-value">{{reportData.statistics.totalDebt}}<text class="stat-unit">å…ƒ</text></view>
      </view>
      <view class="stat-card">
        <view class="stat-icon icon-institution">ğŸ¦</view>
        <view class="stat-label">é“¶è¡Œæœºæ„æ•°</view>
        <view class="stat-value">{{reportData.statistics.bankCount}}<text class="stat-unit">å®¶</text></view>
      </view>
      <view class="stat-card">
        <view class="stat-icon icon-nonbank">ğŸ¢</view>
        <view class="stat-label">éé“¶æœºæ„æ•°</view>
        <view class="stat-value">{{reportData.statistics.nonBankCount}}<text class="stat-unit">å®¶</text></view>
      </view>
      <view class="stat-card">
        <view class="stat-icon icon-overdue">âš ï¸</view>
        <view class="stat-label">é€¾æœŸé‡‘é¢</view>
        <view class="stat-value">{{reportData.statistics.overdueAmount}}<text class="stat-unit">å…ƒ</text></view>
      </view>
      <view class="stat-card">
        <view class="stat-icon icon-query">ğŸ”</view>
        <view class="stat-label">æŸ¥è¯¢æ¬¡æ•°</view>
        <view class="stat-value">{{reportData.statistics.queryCount}}<text class="stat-unit">æ¬¡</text></view>
      </view>
    </view>

    <!-- é“¶è¡Œè´·æ¬¾åˆ—è¡¨ -->
    <view wx:if="{{reportData.bankLoans && reportData.bankLoans.length > 0}}">
      <view class="section-title">ğŸ¦ é“¶è¡Œè´·æ¬¾æ˜ç»†</view>
      <view class="data-table-container">
        <scroll-view scroll-x class="data-table">
          <view class="table-wrapper">
            <view class="table-header">
              <view class="table-cell">æœºæ„åç§°</view>
              <view class="table-cell">è´·æ¬¾é‡‘é¢</view>
              <view class="table-cell">å‰©ä½™é‡‘é¢</view>
              <view class="table-cell">å‘æ”¾æ—¥æœŸ</view>
              <view class="table-cell">çŠ¶æ€</view>
            </view>
            <view wx:for="{{reportData.bankLoans}}" wx:key="index" class="table-row">
              <view class="table-cell">{{item.institutionName}}</view>
              <view class="table-cell highlight">Â¥{{item.loanAmount}}</view>
              <view class="table-cell">Â¥{{item.remainingAmount}}</view>
              <view class="table-cell">{{item.issueDate}}</view>
              <view class="table-cell {{item.status === 'æ­£å¸¸' ? 'good' : 'warning'}}">{{item.status}}</view>
            </view>
          </view>
        </scroll-view>
      </view>
    </view>

    <!-- éé“¶è´·æ¬¾åˆ—è¡¨ -->
    <view wx:if="{{reportData.nonBankLoans && reportData.nonBankLoans.length > 0}}">
      <view class="section-title">ğŸ¢ éé“¶è´·æ¬¾æ˜ç»†</view>
      <view class="data-table-container">
        <scroll-view scroll-x class="data-table">
          <view class="table-wrapper">
            <view class="table-header">
              <view class="table-cell">æœºæ„åç§°</view>
              <view class="table-cell">è´·æ¬¾é‡‘é¢</view>
              <view class="table-cell">å‰©ä½™é‡‘é¢</view>
              <view class="table-cell">çŠ¶æ€</view>
            </view>
            <view wx:for="{{reportData.nonBankLoans}}" wx:key="index" class="table-row">
              <view class="table-cell">{{item.institutionName}}</view>
              <view class="table-cell highlight">Â¥{{item.loanAmount}}</view>
              <view class="table-cell">Â¥{{item.remainingAmount}}</view>
              <view class="table-cell {{item.status === 'æ­£å¸¸' ? 'good' : 'warning'}}">{{item.status}}</view>
            </view>
          </view>
        </scroll-view>
      </view>
    </view>

    <!-- ä¿¡ç”¨å¡åˆ—è¡¨ -->
    <view wx:if="{{reportData.creditCards && reportData.creditCards.length > 0}}">
      <view class="section-title">ğŸ’³ ä¿¡ç”¨å¡æ˜ç»†</view>
      <view class="data-table-container">
        <scroll-view scroll-x class="data-table">
          <view class="table-wrapper">
            <view class="table-header">
              <view class="table-cell">å‘å¡æœºæ„</view>
              <view class="table-cell">ä¿¡ç”¨é¢åº¦</view>
              <view class="table-cell">å·²ç”¨é¢åº¦</view>
              <view class="table-cell">å¼€å¡æ—¥æœŸ</view>
              <view class="table-cell">çŠ¶æ€</view>
            </view>
            <view wx:for="{{reportData.creditCards}}" wx:key="index" class="table-row">
              <view class="table-cell">{{item.issuer}}</view>
              <view class="table-cell highlight">Â¥{{item.creditLimit}}</view>
              <view class="table-cell">Â¥{{item.usedAmount}}</view>
              <view class="table-cell">{{item.issueDate}}</view>
              <view class="table-cell {{item.status === 'æ­£å¸¸' ? 'good' : 'warning'}}">{{item.status}}</view>
            </view>
          </view>
        </scroll-view>
      </view>
    </view>

    <!-- AIæ™ºèƒ½åˆ†æ -->
    <view wx:if="{{reportData.aiAnalysis}}" class="analysis-section">
      <view class="analysis-title">ğŸ¤– AIæ™ºèƒ½åˆ†æ</view>
      <view class="analysis-content">
        <view class="ai-analysis-grid">
          <view wx:for="{{reportData.aiAnalysisPoints}}" wx:key="index" class="ai-analysis-item">
            <view class="ai-analysis-number">{{index + 1}}</view>
            <view class="ai-analysis-text">{{item}}</view>
          </view>
        </view>
      </view>
    </view>

    <!-- é£é™©æç¤º -->
    <view wx:if="{{reportData.riskFactors && reportData.riskFactors.length > 0}}" class="analysis-section">
      <view class="analysis-title">âš ï¸ é£é™©æç¤º</view>
      <view class="analysis-content">
        <view wx:for="{{reportData.riskFactors}}" wx:key="index" class="analysis-point">
          {{item}}
        </view>
      </view>
    </view>

    <!-- ä¸“ä¸šå»ºè®® -->
    <view wx:if="{{reportData.suggestions && reportData.suggestions.length > 0}}" class="analysis-section">
      <view class="analysis-title">ğŸ’¡ ä¸“ä¸šå»ºè®®</view>
      <view class="analysis-content">
        <view wx:for="{{reportData.suggestions}}" wx:key="index" class="analysis-point">
          {{item}}
        </view>
      </view>
    </view>

    <!-- å…è´£å£°æ˜ -->
    <view class="disclaimer">
      <view class="disclaimer-title">å…è´£å£°æ˜</view>
      <view class="disclaimer-content">
        æœ¬æŠ¥å‘Šä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®æˆ–ä¿¡ç”¨è¯„ä¼°ä¾æ®ã€‚æŠ¥å‘Šå†…å®¹åŸºäºAIåˆ†æç”Ÿæˆï¼Œå¯èƒ½å­˜åœ¨è¯¯å·®ã€‚å…·ä½“ä¿¡ç”¨çŠ¶å†µè¯·ä»¥ä¸­å›½äººæ°‘é“¶è¡Œå¾ä¿¡ä¸­å¿ƒå‡ºå…·çš„å®˜æ–¹å¾ä¿¡æŠ¥å‘Šä¸ºå‡†ã€‚
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
    <view class="action-buttons">
      <button class="action-btn download-btn" bindtap="onDownloadReport">
        <text class="btn-icon">ğŸ“¥</text>
        <text class="btn-text">ä¸‹è½½æŠ¥å‘Š</text>
      </button>
      <button class="action-btn share-btn" open-type="share">
        <text class="btn-icon">ğŸ“¤</text>
        <text class="btn-text">åˆ†äº«æŠ¥å‘Š</text>
      </button>
    </view>
  </view>
</view>

