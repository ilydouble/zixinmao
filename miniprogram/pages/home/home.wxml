<!--home.wxml-->
<view class="container">

  <!-- 顶部安全区占位，避免与状态栏重叠 -->
  <view class="status-bar-spacer header-bg" style="height: {{statusBarHeight}}px;"></view>

  <!-- 顶部导航 -->
  <view class="header">
    <view class="header-content">
      <view class="logo-area">
        <text class="logo">🐱</text>
        <text class="app-name">资信猫</text>
      </view>
    </view>
  </view>

  <!-- Banner 轮播 -->
  <view class="banner-section">
    <!-- 调试信息 -->
    <!-- <view style="padding: 20rpx; background: #f0f0f0; margin: 20rpx; border-radius: 8rpx; font-size: 24rpx;">
      <text>调试信息：</text>
      <text>\nbanners 数量: {{banners.length}}</text>
      <text>\nloading: {{loading}}</text>
    </view> -->

    <swiper
      wx:if="{{banners.length > 0}}"
      class="banner-swiper"
      autoplay
      interval="{{5000}}"
      current="{{currentBanner}}"
      bind:change="onBannerChange"
      indicator-dots
      indicator-color="rgba(255,255,255,0.3)"
      indicator-active-color="#fff"
    >
      <swiper-item wx:for="{{banners}}" wx:key="id">
        <view
          class="banner-item {{item.disabled ? 'disabled' : ''}}"
          data-link="{{item.link}}"
          data-disabled="{{item.disabled}}"
          bind:tap="onBannerTap"
        >
          <!-- 如果有图片URL，显示图片；否则显示渐变背景 -->
          <view wx:if="{{item.imageUrl}}" class="banner-bg banner-image">
            <image
              src="{{item.imageUrl}}"
              mode="aspectFill"
              class="banner-img"
            />
            <view wx:if="{{item.disabled}}" class="banner-badge">开发中</view>
          </view>
          <view wx:else class="banner-bg" style="background: {{item.bgColor}}">
            <view class="banner-content">
              <text class="banner-title">{{item.title}}</text>
              <text class="banner-desc">{{item.description || '专业的' + item.title + '分析服务'}}</text>
            </view>
            <view wx:if="{{item.disabled}}" class="banner-badge">开发中</view>
          </view>
        </view>
      </swiper-item>
    </swiper>

    <!-- 加载中状态 -->
    <view wx:if="{{loading}}" class="banner-loading">
      <text>加载中...</text>
    </view>

    <!-- 空状态 -->
    <view wx:if="{{!loading && banners.length === 0}}" class="banner-loading">
      <text>暂无 Banner</text>
    </view>
  </view>

  <!-- 功能模块 -->
  <view class="function-section">
    <view class="section-title">核心功能</view>
    <view class="function-grid">
      <view class="function-item disabled">
        <view class="function-icon">💰</view>
        <view class="function-name">流水宝</view>
        <view class="function-desc">银行流水分析</view>
        <view class="function-badge">开发中</view>
      </view>

      <view
        class="function-item"
        data-url="/packageBusiness/pages/jianxin/jianxin"
        bind:tap="navigateToPage"
      >
        <view class="function-icon">📋</view>
        <view class="function-name">简信宝</view>
        <view class="function-desc">简版征信分析</view>
      </view>

      <view class="function-item disabled">
        <view class="function-icon">📘</view>
        <view class="function-name">专信宝</view>
        <view class="function-desc">详版征信分析</view>
        <view class="function-badge">开发中</view>
      </view>
    </view>
  </view>

  <!-- 定制化产品服务 -->
  <view class="product-section">
    <view class="section-title">定制化产品服务</view>

    <view
      class="product-banner red"
      data-product="dianziqian"
      bind:tap="navigateToProduct"
    >
      <view class="product-banner-content">
        <view class="product-banner-title">电子签</view>
        <view class="product-banner-desc">本地化部署，为金融企业订制专属的线上签署系统</view>
      </view>
      <view class="product-banner-icon">🖊️</view>
    </view>

    <view
      class="product-banner blue"
      data-product="sheloubao"
      bind:tap="navigateToProduct"
    >
      <view class="product-banner-content">
        <view class="product-banner-title">赊楼宝</view>
        <view class="product-banner-desc">赊楼系统，全流程ERP管控</view>
      </view>
      <view class="product-banner-icon">🎁</view>
      <view class="product-banner-badge">激励计划</view>
    </view>

    <view
      class="product-banner purple"
      data-product="diyabao"
      bind:tap="navigateToProduct"
    >
      <view class="product-banner-content">
        <view class="product-banner-title">抵押宝</view>
        <view class="product-banner-desc">抵押贷产品解决方案 · 核心流程在线化</view>
      </view>
      <view class="product-banner-icon">🏦</view>
    </view>
  </view>
</view>

