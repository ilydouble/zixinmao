# 个人中心使用指南

## 功能概述

个人中心页面现在支持在用户头像附近展示所属组织和城市信息，提供更丰富的用户信息展示。

## 使用流程

### 1. 设置组织和城市信息

#### 方法一：通过设置页面
1. 进入个人中心
2. 点击"设置"菜单项
3. 选择"所属组织"，从列表中选择
4. 选择"所属城市"，从列表中选择
5. 系统自动保存设置

#### 方法二：通过快捷入口
1. 进入个人中心
2. 如果未设置组织和城市，会显示"点击设置所属组织和城市 →"
3. 点击该提示直接跳转到设置页面

### 2. 查看信息展示

设置完成后，在个人中心页面会看到：

#### 完整信息展示
```
[头像] 用户昵称
       🏢 银行机构  📍 北京市
       ✅ 已实名认证
```

#### 部分信息展示
```
[头像] 用户昵称
       🏢 银行机构
       ✅ 已实名认证
```

或

```
[头像] 用户昵称
       📍 北京市
       ✅ 已实名认证
```

#### 无信息状态
```
[头像] 用户昵称
       点击设置所属组织和城市 →
       ⚠️ 未实名认证
```

## 测试步骤

### 1. 初始化数据
1. 进入测试页面 `/pages/test/test`
2. 点击"测试数据库初始化"
3. 等待初始化完成

### 2. 快速设置测试数据
1. 在测试页面点击"设置用户组织和城市"
2. 系统会自动设置第一个组织和城市
3. 前往个人中心查看效果

### 3. 手动设置
1. 进入个人中心 → 设置
2. 手动选择不同的组织和城市
3. 返回个人中心查看更新效果

## 界面特点

### 视觉设计
- **标签化展示**: 使用圆角标签展示信息
- **颜色区分**: 组织用蓝色，城市用绿色
- **图标识别**: 🏢 代表组织，📍 代表城市
- **毛玻璃效果**: 半透明背景增强视觉层次

### 响应式布局
- **自适应排列**: 根据内容长度自动调整
- **换行支持**: 长文本自动换行显示
- **文本截断**: 超长文本显示省略号

### 交互体验
- **即时更新**: 设置后立即在个人中心显示
- **下拉刷新**: 支持下拉刷新更新信息
- **快捷跳转**: 点击提示直接跳转设置

## 数据管理

### 组织类型
- 银行机构
- 证券公司
- 保险公司
- 互联网金融
- 政府机构
- 其他机构

### 城市列表
- 北京市
- 上海市
- 广州市
- 深圳市
- 杭州市
- 南京市
- 成都市
- 武汉市

### 数据同步
- 设置页面修改后自动同步到个人中心
- 支持实时更新，无需重启应用
- 数据持久化存储在云端

## 常见问题

### Q: 为什么看不到组织和城市信息？
A: 请确保：
1. 已经在设置页面选择了组织和城市
2. 网络连接正常
3. 尝试下拉刷新个人中心页面

### Q: 如何修改已设置的信息？
A: 
1. 进入个人中心 → 设置
2. 重新选择组织或城市
3. 系统会自动更新显示

### Q: 标签显示不完整怎么办？
A: 
- 长文本会自动截断并显示省略号
- 可以通过设置页面查看完整名称
- 建议选择较短的组织和城市名称

### Q: 可以不设置组织和城市吗？
A: 
- 可以，这些信息是可选的
- 不设置时会显示引导文字
- 不影响其他功能的正常使用

## 技术说明

### 数据流
1. 用户在设置页面选择 → 调用云函数更新
2. 云函数验证并保存 → 返回更新结果
3. 前端更新本地状态 → 个人中心实时显示

### 性能优化
- 条件渲染减少不必要的DOM
- 本地缓存减少网络请求
- 懒加载提升页面响应速度

### 兼容性
- 支持所有微信小程序版本
- 适配不同屏幕尺寸
- 兼容深色模式（未来版本）
