# 设置功能说明

## 功能概述

个人中心的设置页面已经重新设计，移除了外观设置和通知设置，新增了"所属组织"和"所属城市"的选择功能。

## 功能变更

### 移除的功能
- ❌ **外观设置** - 深色模式切换
- ❌ **通知设置** - 推送通知和自动更新开关

### 新增的功能
- ✅ **所属组织选择** - 用户可以选择自己所属的机构类型
- ✅ **所属城市选择** - 用户可以选择自己所在的城市

### 保留的功能
- ✅ **存储设置** - 清除缓存功能
- ✅ **关于** - 关于资信猫、用户协议、隐私政策

## 技术实现

### 云函数
1. **getOrganizations** - 获取组织列表
2. **getCities** - 获取城市列表
3. **updateUserInfo** - 更新用户信息（包括组织和城市设置）

### 数据库集合
1. **organizations** - 组织信息表
2. **cities** - 城市信息表

### 用户数据扩展
用户表新增字段：
- `organizationId` - 所属组织ID
- `organizationName` - 所属组织名称
- `cityCode` - 所属城市代码
- `cityName` - 所属城市名称

## 使用流程

### 选择组织
1. 用户点击"所属组织"
2. 弹出组织选择器
3. 用户选择组织并确认
4. 调用云函数更新用户信息
5. 显示保存成功提示

### 选择城市
1. 用户点击"所属城市"
2. 弹出城市选择器
3. 用户选择城市并确认
4. 调用云函数更新用户信息
5. 显示保存成功提示

## 预置数据

### 组织类型
- 银行机构 (BANK)
- 证券公司 (SECURITIES)
- 保险公司 (INSURANCE)
- 互联网金融 (FINTECH)
- 政府机构 (GOVERNMENT)
- 其他机构 (OTHER)

### 城市列表
- 北京市
- 上海市
- 广州市
- 深圳市
- 杭州市
- 南京市
- 成都市
- 武汉市

## 页面结构

```
设置页面
├── 个人设置
│   ├── 所属组织 (可选择)
│   └── 所属城市 (可选择)
├── 存储设置
│   └── 清除缓存
├── 关于
│   ├── 关于资信猫
│   ├── 用户协议
│   └── 隐私政策
└── 版本信息
```

## 样式特点

- 使用弹窗式选择器，用户体验更好
- 支持滚动选择，操作简便
- 统一的确认/取消按钮
- 实时保存，无需额外提交步骤

## 数据安全

- 所有设置更新通过云函数处理
- 用户只能修改自己的设置
- 数据验证在云端进行
- 支持事务性更新，确保数据一致性

## 扩展性

- 组织和城市数据可通过管理后台动态管理
- 支持添加更多个人设置项
- 选择器组件可复用于其他页面
- 云函数支持批量更新多个设置项
