# 个人中心显示逻辑

## 功能概述

个人中心页面根据用户设置的组织和城市信息，智能显示不同的状态和提示。

## 显示逻辑

基于 `organizationId` 和 `cityCode` 字段来判断用户是否设置了组织和城市信息。

### 情况1：完整设置（组织 + 城市）
**条件**: `userInfo.organizationId && userInfo.organizationId !== '' && userInfo.cityCode && userInfo.cityCode !== ''`

**显示效果**:
```
[头像] 用户昵称
       🏢 银行机构  📍 北京市
       ✅ 已实名认证
```

**特点**:
- 显示两个标签，横向排列
- 组织标签蓝色主题，城市标签绿色主题
- 无设置提示，表示信息完整

### 情况2：只设置组织
**条件**: `userInfo.organizationId && userInfo.organizationId !== '' && (!userInfo.cityCode || userInfo.cityCode === '')`

**显示效果**:
```
[头像] 用户昵称
       🏢 银行机构
       点击设置所属城市 →
       ✅ 已实名认证
```

**特点**:
- 显示组织标签
- 下方显示城市设置提示
- 提示文字较小，不突兀

### 情况3：只设置城市
**条件**: `(!userInfo.organizationId || userInfo.organizationId === '') && userInfo.cityCode && userInfo.cityCode !== ''`

**显示效果**:
```
[头像] 用户昵称
       📍 北京市
       点击设置所属组织 →
       ✅ 已实名认证
```

**特点**:
- 显示城市标签
- 下方显示组织设置提示
- 提示文字较小，不突兀

### 情况4：都未设置
**条件**: `(!userInfo.organizationId || userInfo.organizationId === '') && (!userInfo.cityCode || userInfo.cityCode === '')`

**显示效果**:
```
[头像] 用户昵称
       点击设置所属组织和城市 →
       ✅ 已实名认证
```

**特点**:
- 显示完整的设置提示
- 虚线边框的提示框
- 引导用户进行首次设置

## 技术实现

### WXML 条件渲染
```xml
<!-- 情况1：完整设置 -->
<view wx:if="{{userInfo.organizationId && userInfo.organizationId !== '' && userInfo.cityCode && userInfo.cityCode !== ''}}" class="location-tags">
  <!-- 显示两个标签 -->
</view>

<!-- 情况2：只有组织 -->
<view wx:elif="{{userInfo.organizationId && userInfo.organizationId !== '' && (!userInfo.cityCode || userInfo.cityCode === '')}}" class="partial-location-info">
  <!-- 显示组织标签 + 城市提示 -->
</view>

<!-- 情况3：只有城市 -->
<view wx:elif="{{(!userInfo.organizationId || userInfo.organizationId === '') && userInfo.cityCode && userInfo.cityCode !== ''}}" class="partial-location-info">
  <!-- 显示城市标签 + 组织提示 -->
</view>

<!-- 情况4：都没有 -->
<view wx:else class="no-location-info">
  <!-- 显示完整设置提示 -->
</view>
```

### 样式设计
```css
/* 部分设置状态 */
.partial-location-info {
  display: flex;
  flex-direction: column;
  gap: 8rpx;
}

/* 设置提示 */
.info-placeholder {
  font-size: 20rpx;
  color: rgba(255, 255, 255, 0.7);
  padding: 6rpx 12rpx;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12rpx;
  border: 1rpx dashed rgba(255, 255, 255, 0.3);
}
```

## 用户体验设计

### 1. 渐进式引导
- **完整设置**: 无提示，信息完整展示
- **部分设置**: 温和提示，不影响已设置信息的展示
- **未设置**: 明显提示，引导首次设置

### 2. 视觉层次
- **已设置信息**: 突出显示，使用彩色标签
- **设置提示**: 弱化显示，使用虚线边框和较小字体
- **交互反馈**: 点击提示时有轻微的缩放动画

### 3. 信息密度
- **避免冗余**: 不重复显示相同的设置入口
- **精准提示**: 只提示缺失的信息项
- **简洁明了**: 提示文字简短直接

## 测试场景

### 1. 数据状态测试
```javascript
// 测试用例1：完整数据
userInfo = {
  organizationId: "org001",
  organizationName: "银行机构",
  cityCode: "110000",
  cityName: "北京市"
}
// 预期：显示两个标签，无提示

// 测试用例2：只有组织
userInfo = {
  organizationId: "org001",
  organizationName: "银行机构",
  cityCode: "",
  cityName: ""
}
// 预期：显示组织标签 + 城市设置提示

// 测试用例3：只有城市
userInfo = {
  organizationId: "",
  organizationName: "",
  cityCode: "110000",
  cityName: "北京市"
}
// 预期：显示城市标签 + 组织设置提示

// 测试用例4：都没有
userInfo = {
  organizationId: "",
  organizationName: "",
  cityCode: "",
  cityName: ""
}
// 预期：显示完整设置提示
```

### 2. 交互测试
- ✅ 点击设置提示能正确跳转到设置页面
- ✅ 设置完成后返回个人中心能正确更新显示
- ✅ 下拉刷新能正确更新显示状态

### 3. 视觉测试
- ✅ 不同状态下的布局合理
- ✅ 标签和提示的视觉层次清晰
- ✅ 响应式布局在不同屏幕尺寸下正常

## 优势特点

1. **智能化**: 根据用户设置状态智能显示
2. **渐进式**: 不强制用户一次性设置所有信息
3. **友好性**: 已设置的信息正常展示，不受提示影响
4. **引导性**: 明确提示用户下一步可以做什么
5. **一致性**: 所有提示都指向同一个设置页面

## 后续优化

1. **动画效果**: 添加状态切换的过渡动画
2. **个性化**: 支持用户自定义显示偏好
3. **快捷操作**: 支持长按标签快速修改
4. **更多信息**: 支持显示更多用户属性标签
