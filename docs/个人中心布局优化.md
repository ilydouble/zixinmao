# 个人中心布局优化

## 功能概述

在个人中心页面的用户头像附近展示用户选择的组织和城市信息，提升用户体验和信息展示效果。

## 布局设计

### 信息层次结构
```
用户头像区域
├── 头像 (左侧)
└── 用户信息 (右侧)
    ├── 用户昵称
    ├── 组织和城市标签 (新增)
    └── 认证状态
```

### 显示逻辑

#### 1. 有组织和城市信息
- 显示两个标签，横向排列
- 组织标签：🏢 + 组织名称 (蓝色主题)
- 城市标签：📍 + 城市名称 (绿色主题)

#### 2. 只有组织信息
- 只显示组织标签

#### 3. 只有城市信息
- 只显示城市标签

#### 4. 没有任何信息
- 显示提示文字："点击设置所属组织和城市 →"
- 点击可跳转到设置页面

## 样式特点

### 标签设计
- **背景**: 半透明毛玻璃效果
- **边框**: 细边框增强层次感
- **圆角**: 18rpx 圆角，现代化设计
- **阴影**: 轻微阴影增加立体感
- **颜色区分**: 
  - 组织标签：蓝色主题 (rgba(59, 130, 246, 0.2))
  - 城市标签：绿色主题 (rgba(16, 185, 129, 0.2))

### 响应式布局
- **弹性布局**: 使用 flexbox 自适应排列
- **换行支持**: 长文本自动换行
- **文本截断**: 超长文本显示省略号
- **最大宽度**: 280rpx 防止标签过宽

### 交互效果
- **提示文字**: 虚线边框，引导用户设置
- **点击跳转**: 直接跳转到设置页面
- **视觉层次**: 通过透明度和颜色区分重要性

## 技术实现

### WXML 结构
```xml
<view class="user-location-info">
  <view wx:if="{{userInfo.organizationName || userInfo.cityName}}" class="location-tags">
    <view wx:if="{{userInfo.organizationName}}" class="location-tag organization-tag">
      <text class="tag-icon">🏢</text>
      <text class="tag-text">{{userInfo.organizationName}}</text>
    </view>
    <view wx:if="{{userInfo.cityName}}" class="location-tag city-tag">
      <text class="tag-icon">📍</text>
      <text class="tag-text">{{userInfo.cityName}}</text>
    </view>
  </view>
  <view wx:else class="no-location-info">
    <text class="info-placeholder" data-url="/pages/settings/settings" bind:tap="onNavigateToMenu">
      点击设置所属组织和城市 →
    </text>
  </view>
</view>
```

### WXSS 样式
```css
.location-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 12rpx;
  align-items: center;
}

.location-tag {
  background: rgba(255, 255, 255, 0.15);
  padding: 8rpx 14rpx;
  border-radius: 18rpx;
  backdrop-filter: blur(10rpx);
  border: 1rpx solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);
}
```

## 用户体验优化

### 1. 视觉引导
- 使用图标增强识别性
- 颜色编码区分不同类型信息
- 合理的间距和对齐

### 2. 信息密度
- 紧凑但不拥挤的布局
- 重要信息突出显示
- 次要信息适当弱化

### 3. 操作便利性
- 一键跳转到设置页面
- 清晰的操作提示
- 即时的视觉反馈

## 兼容性考虑

### 1. 屏幕适配
- 小屏设备自动换行
- 大屏设备横向排列
- 文本长度自适应

### 2. 数据状态
- 空数据友好提示
- 部分数据正常显示
- 数据更新实时反映

### 3. 性能优化
- 条件渲染减少DOM
- CSS3硬件加速
- 合理的重绘范围

## 测试场景

### 1. 数据完整性测试
- ✅ 有组织有城市
- ✅ 只有组织
- ✅ 只有城市  
- ✅ 都没有

### 2. 文本长度测试
- ✅ 短文本正常显示
- ✅ 长文本截断显示
- ✅ 超长文本换行处理

### 3. 交互测试
- ✅ 点击提示跳转设置
- ✅ 设置后实时更新显示
- ✅ 页面刷新数据保持

## 后续优化方向

1. **动画效果**: 添加标签出现/消失动画
2. **主题适配**: 支持深色模式
3. **个性化**: 支持用户自定义标签颜色
4. **更多信息**: 支持显示更多用户属性标签
