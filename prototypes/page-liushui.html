<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>æµæ°´å® Â· åŸå‹</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="app">
  <div class="navbar light">
    <a class="back" href="page-home.html">â†</a>
    <div class="title">æµæ°´å®</div>
    <div class="space"></div>
  </div>

  <script>
    // æœªç™»å½•åˆ™è·³è½¬ç™»å½•é¡µï¼ˆæµæ°´å®ä»…éœ€ç™»å½•ï¼‰
    (function(){
      const loggedIn = localStorage.getItem('isLoggedIn')==='1';
      if(!loggedIn){
        const ret = encodeURIComponent('page-liushui.html');
        window.location.href = `page-login.html?return=${ret}`;
      }
    })();
  </script>


  <div class="tabs">
    <a class="tab active" href="page-liushui.html">æµæ°´å®</a>
    <a class="tab" href="page-jianxin.html">ç®€ä¿¡å®</a>
    <a class="tab" href="page-zhuanxin.html">ä¸“ä¿¡å®</a>

  </div>

  <div class="card">
    <div class="upload">
      <div style="font-size:40px">â˜ï¸</div>
      <div style="margin-top:6px;">æ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶è‡³æ­¤å¤„</div>
      <div class="small">æ”¯æŒ PDF/JPEG/PNG</div>
      <div class="row" style="margin-top:10px;">
        <a class="btn">é€‰æ‹©æ–‡ä»¶</a>
      </div>
    </div>
    <div style="margin-top:12px;">
      <div class="small">å¤„ç†ä¸­â€¦ 50%</div>
      <div class="progress"><span style="width:50%"></span></div>
    </div>
  </div>

  <div class="card" id="historyCard">
    <div class="card-title">å†å²æŠ¥å‘Š</div>
    <div class="list"></div>
  </div>



  <script>
    // ç®€å•çš„æ—¥æœŸç­›é€‰åˆ†ç»„ï¼ˆåŸå‹ï¼‰
    (function(){
      const list = [
        {t:'é“¶è¡Œæµæ°´æŠ¥å‘Š',d:'2023-07-15',href:'report.html?type=liushui&title=é“¶è¡Œæµæ°´æŠ¥å‘Š&date=2023-07-15'},
        {t:'å·¥å•†é“¶è¡Œæµæ°´',d:'2023-07-10',href:'report.html?type=liushui&title=å·¥å•†é“¶è¡Œæµæ°´&date=2023-07-10'},
        {t:'å»ºè¡Œé“¶è¡Œæµæ°´',d:'2023-07-08',href:'report.html?type=liushui&title=å»ºè¡Œé“¶è¡Œæµæ°´&date=2023-07-08'}
      ];
      function daysBetween(str){ return Math.floor((Date.now()-new Date(str).getTime())/86400000); }
      function render(range){
        const card = document.getElementById('historyCard');
        let groups = {æœ€è¿‘:'',æ›´æ—©:''};
        list.forEach(i=>{
          const within = range==='all' || daysBetween(i.d) <= Number(range);
          if(!within) return;
          const g = daysBetween(i.d)<=7 ? 'æœ€è¿‘' : 'æ›´æ—©';
          const row = `<a class="item" href="${i.href}"><div class="icon">ğŸ¦</div><div class="meta"><div class="title">${i.t} <span class="tag blue">æµæ°´</span></div><div class="sub">${i.d}</div></div><div class="right">â†’</div></a>`;
          groups[g]+=row;
        });
        card.innerHTML = `<div class="card-title">å†å²æŠ¥å‘Š</div>` +
          (groups.æœ€è¿‘?`<div class="group-h">æœ€è¿‘</div><div class="list">${groups.æœ€è¿‘}</div>`:'')+
          (groups.æ›´æ—©?`<div class="group-h">æ›´æ—©</div><div class="list">${groups.æ›´æ—©}</div>`:'');
      }
      render('all');
      const filters = document.getElementById('filters');
      if (filters) {
        filters.addEventListener('click', e=>{
          const c = e.target.closest('.chip'); if(!c) return;
          filters.querySelectorAll('.chip').forEach(x=>x.classList.remove('active'));
          c.classList.add('active');
          render(c.dataset.range);
        });
      }
    })();
  </script>



</div>
</body>
</html>

